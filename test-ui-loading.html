<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ UI</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-weight: 600;
        }
        .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .status.info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .status.warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        button {
            background: #4285f4;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover { background: #3367d6; }
        .log {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #ddd;
        }
        .test-form {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #ddd;
        }
        .form-group {
            margin: 15px 0;
        }
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        .form-group textarea {
            height: 60px;
            resize: vertical;
        }
        .competency-section {
            border: 1px solid #eee;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            background: white;
        }
        .competency-title {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 10px;
        }
        .level-group {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            align-items: center;
        }
        .level-group input {
            width: 60px;
        }
        .level-group textarea {
            flex: 1;
            height: 40px;
        }
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #c3e6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ UI</h1>
        
        <div class="success-message">
            <strong>üîß –¶–µ–ª—å —Ç–µ—Å—Ç–∞:</strong><br>
            - –°–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É JSON –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ—Ä–º—É<br>
            - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π –≤ –ø–æ–ª—è<br>
            - –û—Ç–ª–∞–¥–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π
        </div>
        
        <div id="status" class="status info">
            –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
        </div>
        
        <div>
            <button onclick="testDataStructure()">üìä –¢–µ—Å—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö</button>
            <button onclick="testUILoading()">üìù –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤ UI</button>
            <button onclick="clearForm()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É</button>
        </div>
        
        <div class="test-form">
            <h3>üìã –¢–µ—Å—Ç–æ–≤–∞—è —Ñ–æ—Ä–º–∞ –æ—Ü–µ–Ω–∫–∏</h3>
            
            <div class="form-group">
                <label for="test-developer">–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:</label>
                <select id="test-developer">
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞...</option>
                    <option value="artem">–ê—Ä—Ç–µ–º –ë—Ä–∞–≥–∏–Ω</option>
                    <option value="denis">–î–µ–Ω–∏—Å –í–∞–ª—å—â–∏–∫–æ–≤</option>
                    <option value="anar">–ê–Ω–∞—Ä –ì—É—Å–µ–π–Ω–æ–≤</option>
                </select>
            </div>
            
            <div id="competencies-container">
                <!-- –ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
        </div>
        
        <div class="log" id="log">
            <!-- –õ–æ–≥–∏ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
        </div>
    </div>

    <script>
        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        const testData = {
            developer: "artem",
            date: "2024-01-15T10:30:00.000Z",
            competencies: {
                "technical": {
                    "junior": {
                        selfEvaluation: 3,
                        managerEvaluation: 4,
                        comments: "–•–æ—Ä–æ—à–∏–µ –±–∞–∑–æ–≤—ã–µ –Ω–∞–≤—ã–∫–∏"
                    },
                    "middle": {
                        selfEvaluation: 2,
                        managerEvaluation: 3,
                        comments: "–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞–∑–≤–∏—Ç–∏–µ"
                    },
                    "senior": {
                        selfEvaluation: 1,
                        managerEvaluation: 2,
                        comments: "–ù–∞—á–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å"
                    }
                },
                "communication": {
                    "junior": {
                        selfEvaluation: 4,
                        managerEvaluation: 4,
                        comments: "–û—Ç–ª–∏—á–Ω—ã–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞–≤—ã–∫–∏"
                    },
                    "middle": {
                        selfEvaluation: 3,
                        managerEvaluation: 3,
                        comments: "–•–æ—Ä–æ—à–∏–π —É—Ä–æ–≤–µ–Ω—å"
                    },
                    "senior": {
                        selfEvaluation: 2,
                        managerEvaluation: 2,
                        comments: "–ù—É–∂–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—Ç—å"
                    }
                },
                "leadership": {
                    "junior": {
                        selfEvaluation: 2,
                        managerEvaluation: 3,
                        comments: "–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª –µ—Å—Ç—å"
                    },
                    "middle": {
                        selfEvaluation: 1,
                        managerEvaluation: 2,
                        comments: "–¢—Ä–µ–±—É–µ—Ç —Ä–∞–±–æ—Ç—ã"
                    },
                    "senior": {
                        selfEvaluation: 1,
                        managerEvaluation: 1,
                        comments: "–ù–µ –≥–æ—Ç–æ–≤ –∫ –ª–∏–¥–µ—Ä—Å—Ç–≤—É"
                    }
                }
            }
        };
        
        function updateStatus(message, type) {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = `status ${type}`;
        }
        
        function log(message) {
            const logEl = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logEl.innerHTML += `[${timestamp}] ${message}\n`;
            logEl.scrollTop = logEl.scrollHeight;
        }
        
        function createCompetencyForm() {
            const container = document.getElementById('competencies-container');
            container.innerHTML = '';
            
            // –°–æ–∑–¥–∞–µ–º —Ñ–æ—Ä–º—É –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            Object.keys(testData.competencies).forEach(compKey => {
                const compData = testData.competencies[compKey];
                const compName = getCompetencyName(compKey);
                
                const compSection = document.createElement('div');
                compSection.className = 'competency-section';
                compSection.innerHTML = `
                    <div class="competency-title">${compName}</div>
                    <div class="level-group">
                        <label>Junior:</label>
                        <input type="number" min="1" max="5" class="self-eval" data-comp="${compKey}" data-level="junior" placeholder="–°–∞–º–æ–æ—Ü–µ–Ω–∫–∞">
                        <input type="number" min="1" max="5" class="manager-eval" data-comp="${compKey}" data-level="junior" placeholder="–ú–µ–Ω–µ–¥–∂–µ—Ä">
                        <textarea class="comments" data-comp="${compKey}" data-level="junior" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"></textarea>
                    </div>
                    <div class="level-group">
                        <label>Middle:</label>
                        <input type="number" min="1" max="5" class="self-eval" data-comp="${compKey}" data-level="middle" placeholder="–°–∞–º–æ–æ—Ü–µ–Ω–∫–∞">
                        <input type="number" min="1" max="5" class="manager-eval" data-comp="${compKey}" data-level="middle" placeholder="–ú–µ–Ω–µ–¥–∂–µ—Ä">
                        <textarea class="comments" data-comp="${compKey}" data-level="middle" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"></textarea>
                    </div>
                    <div class="level-group">
                        <label>Senior:</label>
                        <input type="number" min="1" max="5" class="self-eval" data-comp="${compKey}" data-level="senior" placeholder="–°–∞–º–æ–æ—Ü–µ–Ω–∫–∞">
                        <input type="number" min="1" max="5" class="manager-eval" data-comp="${compKey}" data-level="senior" placeholder="–ú–µ–Ω–µ–¥–∂–µ—Ä">
                        <textarea class="comments" data-comp="${compKey}" data-level="senior" placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏"></textarea>
                    </div>
                `;
                
                container.appendChild(compSection);
            });
            
            log('‚úÖ –§–æ—Ä–º–∞ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π —Å–æ–∑–¥–∞–Ω–∞');
        }
        
        function getCompetencyName(compKey) {
            const names = {
                'technical': '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏',
                'communication': '–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è',
                'leadership': '–õ–∏–¥–µ—Ä—Å—Ç–≤–æ'
            };
            return names[compKey] || compKey;
        }
        
        function testDataStructure() {
            log('üìä –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:');
            
            log(`üë§ –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: ${testData.developer}`);
            log(`üìÖ –î–∞—Ç–∞: ${new Date(testData.date).toLocaleString('ru-RU')}`);
            log(`üìã –ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π: ${Object.keys(testData.competencies).length}`);
            
            Object.keys(testData.competencies).forEach(compKey => {
                const compData = testData.competencies[compKey];
                log(`  üìä ${getCompetencyName(compKey)}: ${Object.keys(compData).length} —É—Ä–æ–≤–Ω–µ–π`);
                
                Object.keys(compData).forEach(levelKey => {
                    const levelData = compData[levelKey];
                    log(`    üìà ${levelKey}: —Å–∞–º–æ=${levelData.selfEvaluation}, –º–µ–Ω–µ–¥–∂–µ—Ä=${levelData.managerEvaluation}, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π="${levelData.comments}"`);
                });
            });
            
            updateStatus('–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞', 'success');
        }
        
        function testUILoading() {
            log('üìù –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ UI...');
            
            try {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
                const developerSelect = document.getElementById('test-developer');
                developerSelect.value = testData.developer;
                log(`‚úÖ –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: ${testData.developer}`);
                
                // –°–æ–∑–¥–∞–µ–º —Ñ–æ—Ä–º—É –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
                if (document.getElementById('competencies-container').children.length === 0) {
                    createCompetencyForm();
                }
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –ø–æ–ª—è (–∫–∞–∫ –≤ evaluation.html)
                if (testData.competencies) {
                    log('üîç –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏...');
                    
                    Object.keys(testData.competencies).forEach(compKey => {
                        const compData = testData.competencies[compKey];
                        log(`üìã –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏—é: ${getCompetencyName(compKey)}`);
                        
                        Object.keys(compData).forEach(levelKey => {
                            const levelData = compData[levelKey];
                            
                            // –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞
                            const selfEvalInput = document.querySelector(`input.self-eval[data-comp="${compKey}"][data-level="${levelKey}"]`);
                            if (selfEvalInput) {
                                selfEvalInput.value = levelData.selfEvaluation || 0;
                                log(`  ‚úÖ –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞ ${levelKey}: ${levelData.selfEvaluation}`);
                            }
                            
                            // –û—Ü–µ–Ω–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
                            const managerEvalInput = document.querySelector(`input.manager-eval[data-comp="${compKey}"][data-level="${levelKey}"]`);
                            if (managerEvalInput) {
                                managerEvalInput.value = levelData.managerEvaluation || 0;
                                log(`  ‚úÖ –û—Ü–µ–Ω–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ ${levelKey}: ${levelData.managerEvaluation}`);
                            }
                            
                            // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                            const commentsInput = document.querySelector(`textarea.comments[data-comp="${compKey}"][data-level="${levelKey}"]`);
                            if (commentsInput) {
                                commentsInput.value = levelData.comments || '';
                                log(`  ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ${levelKey}: "${levelData.comments}"`);
                            }
                        });
                    });
                    
                    log('‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ —Ñ–æ—Ä–º—É');
                    updateStatus('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ UI!', 'success');
                    
                } else {
                    log('‚ùå –ö–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö');
                    updateStatus('–û—à–∏–±–∫–∞: –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 'error');
                }
                
            } catch (error) {
                log('‚ùå –û—à–∏–±–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∑–∞–≥—Ä—É–∑–∫–∏ UI: ' + error.message);
                updateStatus('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ' + error.message, 'error');
            }
        }
        
        function clearForm() {
            log('üóëÔ∏è –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã...');
            
            // –û—á–∏—â–∞–µ–º —Å–µ–ª–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
            document.getElementById('test-developer').value = '';
            
            // –û—á–∏—â–∞–µ–º –≤—Å–µ –ø–æ–ª—è
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.value = '';
            });
            
            log('‚úÖ –§–æ—Ä–º–∞ –æ—á–∏—â–µ–Ω–∞');
            updateStatus('–§–æ—Ä–º–∞ –æ—á–∏—â–µ–Ω–∞', 'info');
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            log('üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é');
            createCompetencyForm();
        });
    </script>
</body>
</html>
